<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>媒体地图浏览器</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div id="app-shell">
      <aside class="side-card">
        <div class="sidebar-head">
          <h1>Media Map Browser</h1>
          <p>本地扫描图片/视频，地图聚合展示缩略图</p>
          <div id="scanStatus" class="summary">空闲</div>
        </div>

        <div class="sheet-pages">
          <div id="mediaSheet" class="sheet-page active">
            <section class="panel-block">
              <h2>目录扫描</h2>
              <div class="scan-controls">
                <label for="pathInput">目录路径</label>
                <input id="pathInput" type="text" placeholder="输入本机绝对路径，如 /Users/you/Pictures" />
                <button id="pickDirBtn" type="button">选择目录</button>
                <button id="scanBtn">开始扫描</button>
              </div>
            </section>

            <section class="panel-block">
              <h2>统计</h2>
              <div id="summaryText" class="summary">总计 0，已定位 0，未定位 0</div>
              <div id="progressBar"><span></span></div>
            </section>

            <section class="panel-block">
              <h2>缓存目录</h2>
              <div class="cache-actions">
                <button id="refreshCacheBtn" type="button">刷新缓存</button>
                <button id="loadSelectedCacheBtn" type="button">加载选中</button>
                <button id="toggleSelectCacheBtn" type="button">全选</button>
                <button id="clearCacheBtn" type="button">清空全部缓存</button>
              </div>
              <div id="cacheSummary" class="summary">缓存：目录 0，元数据 0，缩略图 0，预览 0，边界 0</div>
              <div id="cacheList" class="list"></div>
            </section>

            <section class="panel-block">
              <h2>当前位置分组</h2>
              <div id="clusterList" class="list"></div>
            </section>

            <section class="panel-block">
              <h2>未定位文件</h2>
              <div id="unlocatedList" class="list"></div>
            </section>
          </div>

          <div id="regionSheet" class="sheet-page">
            <section class="panel-block">
              <h2>地名区域着色</h2>
              <div class="scope-tabs">
                <button id="globalScopeTab" class="scope-tab active" type="button">全球（国家）</button>
                <button id="chinaProvinceScopeTab" class="scope-tab" type="button">中国（省份）</button>
                <button id="chinaPrefectureScopeTab" class="scope-tab" type="button">中国（地级市）</button>
              </div>
              <div id="chinaScopeHint" class="summary">中国地级市模式包含香港、澳门特别行政区。</div>
              <label class="summary" for="placeFileInput">上传地名列表文件（txt/csv）</label>
              <input id="placeFileInput" type="file" accept=".txt,.csv,text/plain" />
              <textarea id="placeTextInput" class="place-text" placeholder="输入地名，支持换行、逗号分隔。例如：北京、成都、俄罗斯"></textarea>
              <div class="cache-actions">
                <button id="highlightPlacesBtn" type="button">应用地名着色</button>
                <button id="clearHighlightsBtn" type="button">清除地名着色</button>
                <button id="exportRegionSvgBtn" type="button">导出 SVG（高清）</button>
              </div>
              <div id="placeResultSummary" class="summary">未启用区域着色</div>
              <div id="placeUnmatchedList" class="list"></div>
            </section>
          </div>
        </div>

        <div class="sheet-tabs">
          <button id="mediaSheetTab" class="sheet-tab active" type="button">媒体模式</button>
          <button id="regionSheetTab" class="sheet-tab" type="button">区域模式</button>
        </div>
      </aside>

      <div id="map"></div>
    </div>

    <div id="previewModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button id="closeModal" class="close-btn">关闭</button>
        <div id="previewMedia" class="preview-media"></div>
        <div id="previewMeta" class="preview-meta"></div>
      </div>
    </div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="/static/app.js"></script>
  </body>
</html>
